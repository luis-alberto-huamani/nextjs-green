{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport './perfil-header.scss';\nimport { connect } from 'react-redux';\n\nvar PerfilHeader =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PerfilHeader, _Component);\n\n  function PerfilHeader(props) {\n    var _this;\n\n    _classCallCheck(this, PerfilHeader);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PerfilHeader).call(this, props));\n    _this.state = {\n      friendReq: false,\n      localId: ''\n    };\n    _this.onSubmitRequestFriend = _this.onSubmitRequestFriend.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(PerfilHeader, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var localId, user, checkFriendReq;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                localId = localStorage.getItem('id');\n                this.setState({\n                  localId: localId\n                });\n                user = this.props.user;\n                _context.next = 5;\n                return user.friendReq.find(function (item) {\n                  return item.id === localId;\n                });\n\n              case 5:\n                checkFriendReq = _context.sent;\n\n                if (checkFriendReq) {\n                  this.setState({\n                    friendReq: true\n                  });\n                }\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"onSubmitRequestFriend\",\n    value: function onSubmitRequestFriend(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var user = this.props.user;\n      var localId = this.state.localId;\n      var data = {\n        currentUser: localId,\n        targetUser: user._id\n      };\n      var options = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: 'POST',\n        mode: 'cors',\n        body: _JSON$stringify(data) //fetch('/api/friendRequest.js', options)\n\n      };\n      fetch('/api/friendRequest.js', options).then(function (res) {\n        if (res.status === 200) {\n          _this2.setState({\n            friendReq: true\n          });\n        } else {\n          _this2.setState({\n            friendReq: false\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          friendReq = _this$state.friendReq,\n          localId = _this$state.localId;\n      var _this$props = this.props,\n          user = _this$props.user,\n          isLogin = _this$props.isLogin;\n      var addFriend = React.createElement(\"svg\", {\n        id: user._id,\n        style: {\n          fill: '#8bb940'\n        },\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 640 512\"\n      }, React.createElement(\"path\", {\n        id: user._id,\n        d: \"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\"\n      }));\n      var sent = React.createElement(\"svg\", {\n        style: {\n          fill: '#8bb940'\n        },\n        title: \"Cancelar solicitud\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 640 512\"\n      }, React.createElement(\"path\", {\n        d: \"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z\"\n      }));\n      return React.createElement(\"header\", {\n        className: \"header_perfil_cont\",\n        style: {\n          background: \"url(\".concat(user.frontPageImg, \")center center no-repeat\"),\n          backgroundSize: 'cover'\n        }\n      }, React.createElement(\"div\", {\n        className: \"greeting\"\n      }, React.createElement(\"h1\", null, \"hola, me llamo \", user.name), React.createElement(\"div\", {\n        className: \"quote\"\n      }, React.createElement(\"p\", null, user.frontPageQuote), React.createElement(\"div\", {\n        className: \"line\"\n      }))), React.createElement(\"footer\", {\n        className: \"perfil_header_footer\"\n      }), React.createElement(\"div\", {\n        className: \"perfil_user_cont\",\n        style: {\n          background: \"url(\".concat(user.perfilImg, \") center top no-repeat\"),\n          backgroundSize: 'cover'\n        }\n      }, React.createElement(\"p\", {\n        className: \"user_name\"\n      }, user.name, \" \", user.lastName), user._id !== localId && (!friendReq ? React.createElement(\"button\", {\n        id: user._id,\n        title: \"Enviar solicitud\",\n        onClick: this.onSubmitRequestFriend\n      }, addFriend) : React.createElement(\"button\", {\n        id: user._id,\n        title: \"Solicitud enviada\"\n      }, sent))));\n    }\n  }]);\n\n  return PerfilHeader;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isLogin: state.login\n  };\n};\n\nexport default connect(mapStateToProps)(PerfilHeader);","map":null,"metadata":{},"sourceType":"module"}