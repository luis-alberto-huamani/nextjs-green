{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/felix/projects/green/components/perfil/perfil-nav.jsx\";\nimport React, { Component } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport CardPost from '../card-post/card-post';\nimport { connect } from 'react-redux';\nimport Store from '../store/store';\nimport Link from 'next/link';\nimport { TabContent, TabPane, Nav, NavItem, NavLink, Row, Col } from 'reactstrap';\nimport classnames from 'classnames';\nimport AddPost from './add-post';\nimport './perfil-nav.scss';\nimport Friends from './friends';\nimport uuid from 'uuid/v1';\n/*const users = [\n  {\n    name: 'jhon',\n    lastName: 'ebrio',\n    perfilImg: '/static/friend-1.jpg',\n    frontPageQuote: 'Debemos cuidar el mundo, yo siemre reciclo mis latas de cerveza'\n  },\n  {\n    name: 'sacha',\n    lastName: 'gray',\n    perfilImg: '/static/friend-2.jpg',\n    frontPageQuote: 'En el set de grabacion todos los condones se reciclan'\n  },\n  {\n    name: 'rachel',\n    lastName: 'star',\n    perfilImg: '/static/friend-3.jpg',\n    frontPageQuote: 'Debemos cuidar nuestras playas para evitar el sifilis'\n  },\n  {\n    name: 'mia',\n    lastName: 'kalifa',\n    perfilImg: '/static/friend-4.jpg',\n    frontPageQuote: 'No tengo nada que decir, solo entre aqui a subir mis videos para ganar greencoins'\n  }\n];*/\n\nvar PerfilNav =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PerfilNav, _Component);\n\n  function PerfilNav(props) {\n    var _this;\n\n    _classCallCheck(this, PerfilNav);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PerfilNav).call(this, props));\n    _this.state = {\n      activeTab: '1',\n      history: '',\n      imgUrl: null,\n      posts: [],\n      addModal: false,\n      friends: [],\n      reqFriend: [],\n      currentUser: ''\n    };\n    _this.onToggle = _this.onToggle.bind(_assertThisInitialized(_this));\n    _this.onChangeText = _this.onChangeText.bind(_assertThisInitialized(_this));\n    _this.onChangeImg = _this.onChangeImg.bind(_assertThisInitialized(_this));\n    _this.addPost = _this.addPost.bind(_assertThisInitialized(_this));\n    _this.handleFriend = _this.handleFriend.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(PerfilNav, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this$props = this.props,\n          posts = _this$props.posts,\n          user = _this$props.user;\n      this.setState({\n        posts: posts,\n        reqFriend: user.friendReq,\n        friends: user.friends\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var currentUser = localStorage.getItem('id');\n      this.setState({\n        currentUser: currentUser\n      });\n    }\n  }, {\n    key: \"onToggle\",\n    value: function onToggle(tab) {\n      var activeTab = this.state.activeTab;\n\n      if (activeTab !== tab) {\n        this.setState({\n          activeTab: tab\n        });\n      }\n    }\n  }, {\n    key: \"onChangeText\",\n    value: function onChangeText(e) {\n      this.setState({\n        history: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeImg\",\n    value: function onChangeImg(e) {\n      var _this2 = this;\n\n      var img = e.target.files[0];\n      var reader = new FileReader();\n\n      reader.onloadend = function () {\n        _this2.setState({\n          imgUrl: reader.result\n        });\n      };\n\n      if (img) {\n        this.setState({\n          imgUrl: reader.readAsDataURL(img)\n        });\n      } else {\n        this.setState({\n          imgUrl: null\n        });\n      }\n    }\n  }, {\n    key: \"addPost\",\n    value: function addPost(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      var date = new Date().toLocaleDateString('es-ES', {\n        year: 'numeric',\n        month: 'numeric',\n        day: 'numeric'\n      });\n      var _this$state = this.state,\n          history = _this$state.history,\n          posts = _this$state.posts,\n          imgUrl = _this$state.imgUrl,\n          addModal = _this$state.addModal;\n      var _this$props2 = this.props,\n          id = _this$props2.id,\n          user = _this$props2.user;\n      var authorName = \"\".concat(user.name, \" \").concat(user.lastName);\n      var authorImg = user.perfilImg;\n      var newPost = {\n        author: {\n          img: authorImg,\n          name: authorName\n        },\n        date: date,\n        imgUrl: imgUrl,\n        history: history\n      };\n      var data = {\n        id: id,\n        author: newPost.author,\n        date: newPost.date,\n        imgUrl: newPost.imgUrl,\n        history: newPost.history\n      };\n      this.setState({\n        addModal: true\n      });\n      fetch('/api/newPost.js', {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: \"POST\",\n        body: _JSON$stringify(data)\n      }).then(function (res) {\n        if (res.status === 200) {\n          _this3.setState({\n            history: '',\n            imgUrl: null,\n            posts: [newPost].concat(_toConsumableArray(_this3.state.posts)),\n            addModal: false\n          });\n        }\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"handleFriend\",\n    value: function handleFriend(action, id) {\n      var _this4 = this;\n\n      var currentUser = localStorage.getItem('id');\n      var targetUser = id;\n      var data = {\n        currentUser: currentUser,\n        targetUser: targetUser\n      };\n      var options = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: 'POST',\n        body: _JSON$stringify(data)\n      };\n\n      if (action === 'add') {\n        fetch(\"http://localhost:4000/api/friend/add\", options).then(function (res) {\n          return res.json();\n        }).then(function (res) {\n          _this4.setState({\n            reqFriend: res\n          });\n        });\n      }\n\n      if (action === 'rm') {\n        fetch(\"http://localhost:4000/api/friend/rm\", options);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$state2 = this.state,\n          activeTab = _this$state2.activeTab,\n          history = _this$state2.history,\n          imgUrl = _this$state2.imgUrl,\n          posts = _this$state2.posts,\n          addModal = _this$state2.addModal,\n          reqFriend = _this$state2.reqFriend,\n          friends = _this$state2.friends,\n          currentUser = _this$state2.currentUser;\n      var _this$props3 = this.props,\n          store = _this$props3.store,\n          user = _this$props3.user;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, store && React.createElement(Store, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), React.createElement(Nav, {\n        tabs: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        className: classnames({\n          active: this.state.activeTab === '1',\n          nav_item: this.state.activeTab !== '1'\n        }),\n        onClick: function onClick() {\n          _this5.onToggle('1');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Muro\")), React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        className: classnames({\n          active: this.state.activeTab === '2',\n          nav_item: this.state.activeTab !== '2'\n        }),\n        onClick: function onClick() {\n          _this5.onToggle('2');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"Historia\")), React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        className: classnames({\n          active: this.state.activeTab === '3',\n          nav_item: this.state.activeTab !== '3'\n        }),\n        onClick: function onClick() {\n          _this5.onToggle('3');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"Amigos\")), React.createElement(NavItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        className: classnames({\n          active: this.state.activeTab === '4',\n          nav_item: this.state.activeTab !== '4'\n        }),\n        onClick: function onClick() {\n          _this5.onToggle('4');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, \"Deseos\"))), React.createElement(TabContent, {\n        activeTab: activeTab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(TabPane, {\n        tabId: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, currentUser === user._id && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(AddPost, {\n        value: history,\n        onChangeText: this.onChangeText,\n        img: imgUrl,\n        onChangeImg: this.onChangeImg,\n        onSubmit: this.addPost,\n        modal: addModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      })))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(CardPost, {\n        posts: posts,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      })))), React.createElement(TabPane, {\n        tabId: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"info_perfil_con\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Historia\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, user.history)), React.createElement(\"div\", {\n        className: \"info_perfil_con\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"intereses\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, user.interest)), React.createElement(\"div\", {\n        className: \"info_perfil_con\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \"correo\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, user.mail))))), React.createElement(TabPane, {\n        tabId: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"friend_main_cont\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, friends.map(function (item) {\n        return React.createElement(\"li\", {\n          key: uuid(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: item.url,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"friend_cont\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"img-fluid\",\n          src: item.perfilImg,\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268\n          },\n          __self: this\n        }, item.fullName))));\n      }))), React.createElement(Col, {\n        sm: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        style: {\n          marginTop: '2rem',\n          fontSize: \"1rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278\n        },\n        __self: this\n      }, \"Solicitudes de amistad\"), React.createElement(Friends, {\n        users: reqFriend,\n        onClick: this.handleFriend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }))))), React.createElement(TabPane, {\n        tabId: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, \"Tab 4\"))))));\n    }\n  }]);\n\n  return PerfilNav;\n}(Component);\n\n;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    store: state.store\n  };\n};\n\nexport default connect(mapStateToProps)(PerfilNav);","map":{"version":3,"sources":["/media/felix/projects/green/components/perfil/perfil-nav.jsx"],"names":["React","Component","fetch","CardPost","connect","Store","Link","TabContent","TabPane","Nav","NavItem","NavLink","Row","Col","classnames","AddPost","Friends","uuid","PerfilNav","props","state","activeTab","history","imgUrl","posts","addModal","friends","reqFriend","currentUser","onToggle","bind","onChangeText","onChangeImg","addPost","handleFriend","user","setState","friendReq","localStorage","getItem","tab","e","target","value","img","files","reader","FileReader","onloadend","result","readAsDataURL","preventDefault","date","Date","toLocaleDateString","year","month","day","id","authorName","name","lastName","authorImg","perfilImg","newPost","author","data","headers","method","body","then","res","status","err","console","log","action","targetUser","options","json","store","active","nav_item","_id","interest","mail","map","item","url","fullName","marginTop","fontSize","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport CardPost from '../card-post/card-post';\nimport { connect } from 'react-redux';\nimport Store from '../store/store';\nimport Link from 'next/link';\nimport {\n  TabContent,\n  TabPane,\n  Nav,\n  NavItem,\n  NavLink,\n  Row,\n  Col,\n} from 'reactstrap';\nimport classnames from 'classnames';\nimport AddPost from './add-post';\nimport './perfil-nav.scss';\nimport Friends from './friends';\nimport uuid from 'uuid/v1';\n/*const users = [\n  {\n    name: 'jhon',\n    lastName: 'ebrio',\n    perfilImg: '/static/friend-1.jpg',\n    frontPageQuote: 'Debemos cuidar el mundo, yo siemre reciclo mis latas de cerveza'\n  },\n  {\n    name: 'sacha',\n    lastName: 'gray',\n    perfilImg: '/static/friend-2.jpg',\n    frontPageQuote: 'En el set de grabacion todos los condones se reciclan'\n  },\n  {\n    name: 'rachel',\n    lastName: 'star',\n    perfilImg: '/static/friend-3.jpg',\n    frontPageQuote: 'Debemos cuidar nuestras playas para evitar el sifilis'\n  },\n  {\n    name: 'mia',\n    lastName: 'kalifa',\n    perfilImg: '/static/friend-4.jpg',\n    frontPageQuote: 'No tengo nada que decir, solo entre aqui a subir mis videos para ganar greencoins'\n  }\n];*/\n\nclass PerfilNav extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: '1',\n      history: '',\n      imgUrl: null,\n      posts:[],\n      addModal: false,\n      friends: [],\n      reqFriend: [],\n      currentUser: '',\n    };\n    this.onToggle = this.onToggle.bind(this);\n    this.onChangeText = this.onChangeText.bind(this);\n    this.onChangeImg = this.onChangeImg.bind(this);\n    this.addPost = this.addPost.bind(this);\n    this.handleFriend = this.handleFriend.bind(this);\n  }\n\n  componentWillMount() {\n    const { posts, user } = this.props;\n    this.setState({ posts: posts, reqFriend: user.friendReq, friends: user.friends });\n  }\n\n  componentDidMount() {\n    const currentUser = localStorage.getItem('id');\n    this.setState({ currentUser });\n  }\n\n  onToggle(tab) {\n    const { activeTab } = this.state;\n    if (activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  onChangeText(e) {\n    this.setState({ history: e.target.value });\n  }\n  onChangeImg(e) {\n    const img = e.target.files[0];\n    const reader = new FileReader();\n    reader.onloadend= () => {\n      this.setState({ imgUrl: reader.result });\n    }\n    if (img) {\n      this.setState({ imgUrl: reader.readAsDataURL(img) });\n    } else {\n      this.setState({ imgUrl: null });\n    }\n  }\n\n  addPost(e) {\n    e.preventDefault()\n    const date = new Date().toLocaleDateString('es-ES', { year: 'numeric', month: 'numeric', day:'numeric' });\n    const { history, posts, imgUrl, addModal } = this.state;\n    const { id, user } = this.props;\n    const authorName = `${user.name} ${user.lastName}`;\n    const authorImg = user.perfilImg;\n    const newPost = {\n      author: {\n        img: authorImg,\n        name:authorName,\n      },\n      date,\n      imgUrl,\n      history,\n    };\n    const data = {\n      id,\n      author: newPost.author,\n      date: newPost.date,\n      imgUrl: newPost.imgUrl,\n      history: newPost.history,\n    }\n    this.setState({ addModal: true });\n    fetch('/api/newPost.js', {\n      headers: { \"Content-Type\": \"application/json\" },\n      method: \"POST\",\n      body: JSON.stringify(data),\n    })\n      .then((res) => {\n        if (res.status === 200) {\n          this.setState({ history: '', imgUrl: null, posts: [newPost, ...this.state.posts], addModal: false  });\n        }\n      })\n      .catch(err => console.log(err));\n  }\n\n  handleFriend(action, id) {\n    const currentUser = localStorage.getItem('id');\n    const targetUser = id;\n    const data = {\n      currentUser,\n      targetUser\n    }\n    const options = {\n      headers: { \"Content-Type\": \"application/json\" },\n      method: 'POST',\n      body: JSON.stringify(data),\n    }\n    if (action === 'add') {\n      fetch(`http://localhost:4000/api/friend/add`, options)\n        .then(res => res.json())\n        .then(res => {\n          this.setState({ reqFriend: res });\n        })\n    }\n    if (action === 'rm') {\n      fetch(`http://localhost:4000/api/friend/rm`, options);\n    }\n  }\n  \n  render() {\n    const {\n      activeTab,\n      history,\n      imgUrl,\n      posts,\n      addModal,\n      reqFriend,\n      friends,\n      currentUser\n    } = this.state;\n    const { store, user } = this.props;\n    return (\n      <div>\n        {\n          store && <Store />\n        }\n        <Nav tabs>\n          <NavItem>\n            <NavLink\n              className={classnames({ active: this.state.activeTab === '1', nav_item: this.state.activeTab !== '1'  })}\n              onClick={()=>{this.onToggle('1')}}\n            >\n              Muro\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink\n              className={classnames({ active: this.state.activeTab === '2', nav_item: this.state.activeTab !== '2'  })}\n              onClick={()=>{this.onToggle('2')}}\n            >\n              Historia\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink\n              className={classnames({ active: this.state.activeTab === '3', nav_item: this.state.activeTab !== '3'  })}\n              onClick={()=>{this.onToggle('3')}}\n            >\n              Amigos\n            </NavLink>\n          </NavItem>\n          <NavItem>\n            <NavLink\n              className={classnames({ active: this.state.activeTab === '4', nav_item: this.state.activeTab !== '4'  })}\n              onClick={()=>{this.onToggle('4')}}\n            >\n              Deseos\n            </NavLink>\n          </NavItem>\n        </Nav>\n        <TabContent activeTab={activeTab} >\n          <TabPane tabId='1'>\n            <Row>\n              <Col sm=\"12\">\n                {\n                  currentUser === user._id && (\n                    <div>\n                      <AddPost\n                      value={history}\n                      onChangeText={this.onChangeText}\n                      img={imgUrl}\n                      onChangeImg={this.onChangeImg}\n                      onSubmit={this.addPost}\n                      modal={addModal}\n                    />\n                      <div className=\"line\" />\n                    </div>\n                  )\n                }\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                <CardPost posts={posts}  />\n              </Col>\n            </Row>\n          </TabPane>\n          <TabPane tabId='2'>\n            <Row>\n              <Col sm=\"12\">\n                <div className=\"info_perfil_con\">\n                  <h2>Historia</h2>\n                  <p>{user.history}</p>\n                </div>\n                <div className=\"info_perfil_con\">\n                  <h2>intereses</h2>\n                  <p>{user.interest}</p>\n                </div>\n                <div className=\"info_perfil_con\">\n                  <h2>correo</h2>\n                  <p>{user.mail}</p>\n                </div>\n              </Col>\n            </Row>\n          </TabPane>\n          <TabPane tabId='3'>\n            <Row>\n              <Col sm='6'>\n                <ul className=\"friend_main_cont\">\n                  {\n                    friends.map((item) => (\n                      <li key={uuid()}>\n                        <a href={item.url}>\n                          <div className=\"friend_cont\">\n                            <img className=\"img-fluid\" src={item.perfilImg} alt=\"\"/>\n                            <p>{item.fullName}</p>\n                          </div>\n                        </a>\n                      </li>\n                    ))\n                  }\n                </ul>\n              </Col>\n              <Col sm=\"6\">\n                <div>\n                <h2 style={{marginTop: '2rem', fontSize: \"1rem\"}}>Solicitudes de amistad</h2>\n                  {\n                    <Friends \n                      users={reqFriend}\n                      onClick={this.handleFriend}\n                    />\n                  }                \n                </div>\n            </Col>\n            </Row>\n          </TabPane>\n          <TabPane tabId='4'>\n            <Row>\n              <Col sm=\"12\">\n                <h2>Tab 4</h2>\n              </Col>\n            </Row>\n          </TabPane>\n        </TabContent>\n      </div>\n    );\n  }\n};\n\nconst mapStateToProps = state => ({ store: state.store });\n\nexport default connect(mapStateToProps)(PerfilNav);\n\n"]},"metadata":{},"sourceType":"module"}