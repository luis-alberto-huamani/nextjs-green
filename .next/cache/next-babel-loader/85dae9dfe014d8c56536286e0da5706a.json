{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport './perfil-header.scss';\nimport { connect } from 'react-redux';\n\nvar PerfilHeader =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PerfilHeader, _Component);\n\n  function PerfilHeader(props) {\n    var _this;\n\n    _classCallCheck(this, PerfilHeader);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PerfilHeader).call(this, props));\n    _this.state = {\n      friendReq: false,\n      localId: ''\n    };\n    _this.onSubmitRequestFriend = _this.onSubmitRequestFriend.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(PerfilHeader, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var localId, user, checkFriendReq;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                localId = localStorage.getItem('id');\n                this.setState({\n                  localId: localId\n                });\n                user = this.props.user;\n                _context.next = 5;\n                return user.friendReq.find(function (item) {\n                  return item.id === localId;\n                });\n\n              case 5:\n                checkFriendReq = _context.sent;\n\n                if (checkFriendReq) {\n                  this.setState({\n                    friendReq: true\n                  });\n                }\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"onSubmitRequestFriend\",\n    value: function onSubmitRequestFriend(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var user = this.props.user;\n      var localId = this.state.localId;\n      var data = {\n        currentUser: localId,\n        targetUser: user._id\n      };\n      var options = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: 'POST',\n        mode: 'cors',\n        body: _JSON$stringify(data) //fetch('/api/friendRequest.js', options)\n\n      };\n      fetch('/api/friendRequest.js', options).then(function (res) {\n        if (res.status === 200) {\n          _this2.setState({\n            friendReq: true\n          });\n        } else {\n          _this2.setState({\n            friendReq: false\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          friendReq = _this$state.friendReq,\n          localId = _this$state.localId;\n      var _this$props = this.props,\n          user = _this$props.user,\n          isLogin = _this$props.isLogin;\n      var addFriend = React.createElement(\"svg\", {\n        id: user._id,\n        style: {\n          fill: '#8bb940'\n        },\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 640 512\"\n      }, React.createElement(\"path\", {\n        id: user._id,\n        d: \"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\"\n      }));\n      var sent = React.createElement(\"svg\", {\n        style: {\n          fill: '#8bb940'\n        },\n        title: \"Cancelar solicitud\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 640 512\"\n      }, React.createElement(\"path\", {\n        d: \"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z\"\n      }));\n      return React.createElement(\"header\", {\n        className: \"header_perfil_cont\",\n        style: {\n          background: \"url(\".concat(user.frontPageImg, \")center center no-repeat\"),\n          backgroundSize: 'cover'\n        }\n      }, React.createElement(\"div\", {\n        className: \"greeting\"\n      }, React.createElement(\"h1\", null, \"hola, me llamo \", user.name), React.createElement(\"div\", {\n        className: \"quote\"\n      }, React.createElement(\"p\", null, user.frontPageQuote), React.createElement(\"div\", {\n        className: \"line\"\n      }))), React.createElement(\"footer\", {\n        className: \"perfil_header_footer\"\n      }), React.createElement(\"div\", {\n        className: \"perfil_user_cont\",\n        style: {\n          background: \"url(\".concat(user.perfilImg, \") center top no-repeat\"),\n          backgroundSize: 'cover'\n        }\n      }, React.createElement(\"p\", {\n        className: \"user_name\"\n      }, user.name, \" \", user.lastName), user._id !== localId && (!friendReq ? React.createElement(\"button\", {\n        id: user._id,\n        title: \"Enviar solicitud\",\n        onClick: this.onSubmitRequestFriend\n      }, addFriend) : React.createElement(\"button\", {\n        id: user._id,\n        title: \"Solicitud enviada\"\n      }, sent))));\n    }\n  }]);\n\n  return PerfilHeader;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isLogin: state.login\n  };\n};\n\nexport default connect(mapStateToProps)(PerfilHeader);","map":{"version":3,"sources":["/media/felix/projects/green/components/perfil/perfil-header.jsx"],"names":["React","Component","connect","PerfilHeader","props","state","friendReq","localId","onSubmitRequestFriend","bind","localStorage","getItem","setState","user","find","item","id","checkFriendReq","e","preventDefault","data","currentUser","targetUser","_id","options","headers","method","mode","body","fetch","then","res","status","isLogin","addFriend","fill","sent","background","frontPageImg","backgroundSize","name","frontPageQuote","perfilImg","lastName","mapStateToProps","login"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './perfil-header.scss';\nimport { connect } from 'react-redux';\n\nclass PerfilHeader extends Component{\n  constructor(props) {\n    super(props);\n    this.state={\n      friendReq : false,\n      localId: '',\n    }\n    this.onSubmitRequestFriend = this.onSubmitRequestFriend.bind(this);\n  }\n\n  async componentDidMount() {\n    const localId = localStorage.getItem('id');\n    this.setState({ localId });\n    const { user } = this.props;\n    const checkFriendReq = await user.friendReq.find(item => item.id === localId);\n    if (checkFriendReq) {\n      this.setState({ friendReq: true });\n    }\n  }\n\n  onSubmitRequestFriend(e) {\n    e.preventDefault();\n    const { user } = this.props;\n    const { localId } = this.state;\n    const data = {\n      currentUser: localId,\n      targetUser: user._id,\n    }\n    const options = {\n      headers: { \"Content-Type\": \"application/json\" },\n      method: 'POST',\n      mode: 'cors',\n      body: JSON.stringify(data),\n    }\n\n    //fetch('/api/friendRequest.js', options)\n    fetch('/api/friendRequest.js', options)\n      .then(res => {\n        if(res.status === 200) {\n          this.setState({ friendReq: true });\n        } else {\n          this.setState({ friendReq: false });\n        }\n      })\n  }\n\n  render() {\n    const { friendReq, localId } = this.state;\n    const { user, isLogin } = this.props;\n    const addFriend = <svg id={user._id} style={{ fill: '#8bb940' }} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 512\"><path id={user._id} d=\"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\" /></svg>;\n    const sent = <svg style={{ fill: '#8bb940' }} title=\"Cancelar solicitud\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 512\"><path d=\"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z\" /></svg>;\n    return(\n      <header className=\"header_perfil_cont\" style={{ background:`url(${user.frontPageImg})center center no-repeat`, backgroundSize: 'cover' }}>\n      <div className=\"greeting\">\n        <h1>hola, me llamo {user.name}</h1>\n        <div className=\"quote\">\n          <p>{user.frontPageQuote}</p>\n          <div className=\"line\" />\n        </div>\n      </div>\n      <footer className=\"perfil_header_footer\" />\n      <div className=\"perfil_user_cont\" style={{ background: `url(${user.perfilImg}) center top no-repeat`, backgroundSize: 'cover' }}>\n        <p className=\"user_name\">{user.name}{\" \"}{user.lastName}</p>\n          {\n            user._id !== localId && (\n              !friendReq\n              ? <button id={user._id} title=\"Enviar solicitud\" onClick={this.onSubmitRequestFriend}>{addFriend}</button>\n              : <button id={user._id} title=\"Solicitud enviada\">{sent}</button>\n            )\n          }\n      </div>\n    </header>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({ isLogin: state.login });\n\nexport default connect(mapStateToProps)(PerfilHeader);\n\n"]},"metadata":{},"sourceType":"module"}