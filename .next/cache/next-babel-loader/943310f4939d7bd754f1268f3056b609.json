{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/felix/projects/green/components/perfil/perfil-header.jsx\";\nimport React, { Component } from 'react';\nimport './perfil-header.scss';\nimport { connect } from 'react-redux';\n\nvar PerfilHeader =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PerfilHeader, _Component);\n\n  function PerfilHeader(props) {\n    var _this;\n\n    _classCallCheck(this, PerfilHeader);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PerfilHeader).call(this, props));\n    _this.state = {\n      friendReq: false,\n      localId: ''\n    };\n    _this.handleFriend = _this.handleFriend.bind(_assertThisInitialized(_this));\n    _this.onSubmitRequestFriend = _this.onSubmitRequestFriend.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(PerfilHeader, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var localId = localStorage.getItem('id');\n      this.setState({\n        localId: localId\n      });\n    }\n  }, {\n    key: \"handleFriend\",\n    value: function handleFriend(e) {\n      this.setState({\n        friendReq: !friendReq\n      });\n    }\n  }, {\n    key: \"onSubmitRequestFriend\",\n    value: function onSubmitRequestFriend(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var user = this.props.user;\n      var _this$state = this.state,\n          localId = _this$state.localId,\n          friendReq = _this$state.friendReq;\n      var data = {\n        currentUser: localId,\n        targetUser: user._id\n      };\n      var options = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: 'POST',\n        mode: 'cors',\n        body: _JSON$stringify(data)\n      };\n      fetch('http://localhost/api/friendRequest', options).then(function (res) {\n        if (res.status === 200) {\n          _this2.setState({\n            friendReq: true\n          });\n        } else {\n          _this2.setState({\n            friendReq: false\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          friendReq = _this$state2.friendReq,\n          localId = _this$state2.localId;\n      var _this$props = this.props,\n          user = _this$props.user,\n          isLogin = _this$props.isLogin;\n      var addFriend = React.createElement(\"svg\", {\n        id: user._id,\n        style: {\n          fill: '#8bb940'\n        },\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 640 512\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"path\", {\n        id: user._id,\n        d: \"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }));\n      var rmFriend = React.createElement(\"svg\", {\n        id: user._id,\n        style: {\n          fill: '#ff6c1a'\n        },\n        title: \"Cancelar solicitud\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        viewBox: \"0 0 640 512\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"path\", {\n        id: user._id,\n        d: \"M624 208H432c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }));\n      return React.createElement(\"header\", {\n        className: \"header_perfil_cont\",\n        style: {\n          background: \"url(\".concat(user.frontPageImg, \")center center no-repeat\"),\n          backgroundSize: 'cover'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"greeting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"hola, me llamo \", user.name), React.createElement(\"div\", {\n        className: \"quote\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, user.frontPageQuote), React.createElement(\"div\", {\n        className: \"line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }))), React.createElement(\"footer\", {\n        className: \"perfil_header_footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"perfil_user_cont\",\n        style: {\n          background: \"url(\".concat(user.perfilImg, \") center top no-repeat\"),\n          backgroundSize: 'cover'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"user_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, user.name, \" \", user.lastName), user._id !== localId && (!friendReq ? React.createElement(\"button\", {\n        id: user._id,\n        title: \"Enviar solicitud\",\n        onClick: this.handleFriend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, addFriend) : React.createElement(\"button\", {\n        id: user._id,\n        title: \"Cancelar solicitud\",\n        onClick: this.handleFriend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, rmFriend))));\n    }\n  }]);\n\n  return PerfilHeader;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isLogin: state.login\n  };\n};\n\nexport default connect(mapStateToProps)(PerfilHeader);","map":{"version":3,"sources":["/media/felix/projects/green/components/perfil/perfil-header.jsx"],"names":["React","Component","connect","PerfilHeader","props","state","friendReq","localId","handleFriend","bind","onSubmitRequestFriend","localStorage","getItem","setState","e","preventDefault","user","data","currentUser","targetUser","_id","options","headers","method","mode","body","fetch","then","res","status","isLogin","addFriend","fill","rmFriend","background","frontPageImg","backgroundSize","name","frontPageQuote","perfilImg","lastName","mapStateToProps","login"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './perfil-header.scss';\nimport { connect } from 'react-redux';\n\nclass PerfilHeader extends Component{\n  constructor(props) {\n    super(props);\n    this.state={\n      friendReq : false,\n      localId: '',\n    }\n    this.handleFriend = this.handleFriend.bind(this);\n    this.onSubmitRequestFriend = this.onSubmitRequestFriend.bind(this);\n  }\n\n  componentDidMount() {\n    const localId = localStorage.getItem('id');\n    this.setState({ localId });\n  }\n\n  handleFriend(e) {\n\n    this.setState({ friendReq: !friendReq });\n  }\n\n  onSubmitRequestFriend(e) {\n    e.preventDefault();\n    const { user } = this.props;\n    const { localId, friendReq } = this.state;\n    const data = {\n      currentUser: localId,\n      targetUser: user._id,\n    }\n    const options = {\n      headers: { \"Content-Type\": \"application/json\" },\n      method: 'POST',\n      mode: 'cors',\n      body: JSON.stringify(data),\n    }\n\n    fetch('http://localhost/api/friendRequest', options)\n      .then(res => {\n        if(res.status === 200) {\n          this.setState({ friendReq: true });\n        } else {\n          this.setState({ friendReq: false });\n        }\n      })\n  }\n\n  render() {\n    const { friendReq, localId } = this.state;\n    const { user, isLogin } = this.props;\n    const addFriend = <svg id={user._id} style={{ fill: '#8bb940' }} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 512\"><path id={user._id} d=\"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\" /></svg>;\n    const rmFriend = <svg id={user._id} style={{ fill: '#ff6c1a' }} title=\"Cancelar solicitud\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 512\"><path id={user._id} d=\"M624 208H432c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\" /></svg>;\n    return(\n      <header className=\"header_perfil_cont\" style={{ background:`url(${user.frontPageImg})center center no-repeat`, backgroundSize: 'cover' }}>\n      <div className=\"greeting\">\n        <h1>hola, me llamo {user.name}</h1>\n        <div className=\"quote\">\n          <p>{user.frontPageQuote}</p>\n          <div className=\"line\" />\n        </div>\n      </div>\n      <footer className=\"perfil_header_footer\" />\n      <div className=\"perfil_user_cont\" style={{ background: `url(${user.perfilImg}) center top no-repeat`, backgroundSize: 'cover' }}>\n        <p className=\"user_name\">{user.name}{\" \"}{user.lastName}</p>\n          {\n            user._id !== localId && (\n              !friendReq\n              ? <button id={user._id} title=\"Enviar solicitud\" onClick={this.handleFriend}>{addFriend}</button>\n              : <button id={user._id} title=\"Cancelar solicitud\" onClick={this.handleFriend}>{rmFriend}</button>\n            )\n          }\n      </div>\n    </header>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({ isLogin: state.login });\n\nexport default connect(mapStateToProps)(PerfilHeader);\n\n"]},"metadata":{},"sourceType":"module"}